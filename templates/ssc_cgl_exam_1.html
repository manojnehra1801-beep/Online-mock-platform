<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SSC CGL Mock Test</title>

<style>
body{margin:0;font-family:Segoe UI,sans-serif;background:#f2f4f8;}
.header{background:#1e3a8a;color:#fff;padding:14px;text-align:center;font-weight:600;}
.sections{display:flex;background:#e5e7eb;}
.sec{flex:1;padding:10px;text-align:center;font-size:13px;font-weight:600;border-right:1px solid #cbd5f5;cursor:pointer;}
.active{background:#2563eb;color:white;}
.timer{position:fixed;top:10px;right:10px;background:#111827;color:white;padding:8px 12px;border-radius:10px;font-size:13px;}
.container{padding:14px;}
.box{background:white;padding:16px;border-radius:14px;box-shadow:0 4px 10px rgba(0,0,0,0.08);}
.qno{font-weight:600;margin-bottom:10px;}
.option{border:1px solid #d1d5db;padding:12px;border-radius:12px;margin-bottom:10px;background:#f9fafb;}
.btns{display:flex;gap:10px;margin-top:14px;}
button{flex:1;padding:12px;border:none;border-radius:12px;font-weight:600;}
.review{background:#facc15;}
.prev{background:#9ca3af;}
.next{background:#2563eb;color:white;}
</style>

<!-- GLOBAL TIMER (no reset) -->
<script>
const EXAM_TIME = 3000; // 50 min
let remainingTime = localStorage.getItem("exam_time");

if (!remainingTime){
    remainingTime = EXAM_TIME;
    localStorage.setItem("exam_time", remainingTime);
}

function startTimer(){
    setInterval(function(){
        let min = Math.floor(remainingTime/60);
        let sec = remainingTime%60;
        document.getElementById("timer").innerText =
            min + ":" + (sec<10?"0"+sec:sec);

        remainingTime--;
        localStorage.setItem("exam_time", remainingTime);

        if(remainingTime<=0){
            localStorage.removeItem("exam_time");
            document.getElementById("examForm").submit();
        }
    },1000);
}
window.onload=startTimer;
</script>

</head>

<body>

<div class="header">SSC CGL – Mock Test</div>

<!-- SECTION BAR -->
<div class="sections">
<form method="post" id="secForm">
    <button class="sec {% if qno<=25 %}active{% endif %}" name="action" value="jump_0">Section 1<br>Reasoning</button>
    <button class="sec {% if qno>25 and qno<=50 %}active{% endif %}" name="action" value="jump_25">Section 2<br>GK</button>
    <button class="sec {% if qno>50 and qno<=75 %}active{% endif %}" name="action" value="jump_50">Section 3<br>Maths</button>
    <button class="sec {% if qno>75 %}active{% endif %}" name="action" value="jump_75">Section 4<br>English</button>
</form>
</div>

<div class="timer">⏱ <span id="timer">--:--</span></div>

<div class="container">
<div class="box">

<div class="qno">Question {{ qno }} / {{ total }}</div>

<form method="post" id="examForm">

<p><b>{{ question }}</b></p>

{% for opt in options %}
<div class="option">
<label>
<input type="radio" name="ans" value="{{ loop.index0 }}"
{% if session.answers.get((qno-1)|string) == loop.index0|string %}checked{% endif %}>
{{ opt }}
</label>
</div>
{% endfor %}

<div class="btns">
<button class="prev" name="action" value="prev">Previous</button>
<button class="review" name="mark_review">Mark for Review</button>
<button class="next">Save & Next</button>
</div>

</form>

</div>
</div>

</body>
</html>