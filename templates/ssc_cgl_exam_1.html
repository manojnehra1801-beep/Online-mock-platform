<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SSC CGL Mock Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;margin:0;background:#f4f6fb}
.header{
    display:flex;justify-content:space-between;
    padding:10px;background:#1f2937;color:#fff;
}
.timer{color:#facc15;font-weight:bold}
.qbox{display:none;padding:15px}
.options label{display:block;margin:8px 0}
.controls{
    position:fixed;bottom:10px;left:0;right:0;
    display:flex;justify-content:space-around;
}
button{padding:10px 14px;font-size:14px}
.submit{
    position:fixed;right:15px;bottom:70px;
    background:#dc2626;color:#fff;border:none;
}
</style>
</head>

<body>

<div class="header">
    <div>SSC CGL Mock-1</div>
    <div class="timer" id="timer"></div>
</div>

<div id="questions"></div>

<div class="controls">
    <button onclick="prevQ()">Previous</button>
    <button onclick="nextQ()">Next</button>
</div>

<button class="submit" onclick="submitExam()">Submit</button>

<script>
/* ================= QUESTIONS ================= */
const QUESTIONS = [
    {q:"1. भारत की राजधानी क्या है?", o:["Mumbai","Delhi","Chennai","Kolkata"]},
    {q:"2. 2 + 2 = ?", o:["3","4","5","6"]},
    {q:"3. SSC का full form क्या है?", o:["Staff Selection Commission","State Service","Sub Staff","None"]}
];

/* ================= STATE ================= */
let currentIndex = parseInt(localStorage.getItem("currentIndex")) || 0;
let timeLeft = parseInt(localStorage.getItem("timeLeft")) || 1800;
let answers = JSON.parse(localStorage.getItem("answers") || "{}");

/* ================= RENDER ================= */
const qDiv = document.getElementById("questions");

QUESTIONS.forEach((q,i)=>{
    const d=document.createElement("div");
    d.className="qbox";
    d.id="q"+i;
    d.innerHTML=`<b>${q.q}</b><div class="options">${
        q.o.map((opt,j)=>`
        <label>
        <input type="radio" name="q${i}" value="${j}"
        ${answers[i]==j?"checked":""}
        onclick="saveAnswer(${i},${j})"> ${opt}
        </label>`).join("")
    }</div>`;
    qDiv.appendChild(d);
});

function showQ(i){
    document.querySelectorAll(".qbox").forEach(q=>q.style.display="none");
    document.getElementById("q"+i).style.display="block";
    localStorage.setItem("currentIndex",i);
}

showQ(currentIndex);

/* ================= NAV ================= */
function nextQ(){
    if(currentIndex<QUESTIONS.length-1){
        currentIndex++;
        showQ(currentIndex);
    }
}
function prevQ(){
    if(currentIndex>0){
        currentIndex--;
        showQ(currentIndex);
    }
}

/* ================= ANSWERS ================= */
function saveAnswer(q,a){
    answers[q]=a;
    localStorage.setItem("answers",JSON.stringify(answers));
}

/* ================= TIMER ================= */
function format(sec){
    const m=Math.floor(sec/60);
    const s=sec%60;
    return `${m}:${s<10?"0":""}${s}`;
}
document.getElementById("timer").innerText=format(timeLeft);

setInterval(()=>{
    timeLeft--;
    localStorage.setItem("timeLeft",timeLeft);
    document.getElementById("timer").innerText=format(timeLeft);
    if(timeLeft<=0) submitExam();
},1000);

/* ================= SUBMIT ================= */
function submitExam(){
    localStorage.removeItem("currentIndex");
    localStorage.removeItem("timeLeft");
    localStorage.removeItem("answers");
    localStorage.removeItem("mock1_started");
    alert("Exam submitted");
    window.location.href="/ssc/cgl/full-mocks";
}
</script>

</body>
</html>