<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SSC CGL Mock Test 1</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:#f4f6fb;
}
.header{
    background:#1f2937;
    color:#fff;
    padding:12px;
    display:flex;
    justify-content:space-between;
    align-items:center;
}
.timer{
    font-weight:bold;
}
.main{
    display:flex;
}
.left{
    flex:3;
    padding:15px;
}
.right{
    flex:1;
    background:#fff;
    padding:10px;
    border-left:1px solid #ddd;
}
.question{
    font-size:16px;
    font-weight:600;
    margin-bottom:10px;
}
.option{
    background:#fff;
    padding:10px;
    margin-bottom:8px;
    border-radius:8px;
    border:1px solid #ddd;
}
.controls{
    display:flex;
    justify-content:space-between;
    margin-top:15px;
}
button{
    padding:10px 14px;
    border:none;
    border-radius:6px;
    background:#2563eb;
    color:#fff;
    font-size:14px;
}
.review{
    background:#f59e0b;
}
.submit{
    background:#dc2626;
}
.palette{
    display:flex;
    flex-wrap:wrap;
    gap:6px;
}
.palette button{
    width:36px;
    height:36px;
    border:none;
    border-radius:50%;
    font-weight:bold;
}
.grey{background:#d1d5db;}
.green{background:#22c55e;color:#fff;}
.yellow{background:#facc15;}
</style>
</head>

<body>

<div class="header">
    <div>SSC CGL Mock-1</div>
    <div class="timer" id="timer">60:00</div>
</div>

<form method="post" id="examForm">
<div class="main">

<!-- LEFT (QUESTIONS) -->
<div class="left">
{% for q in questions %}
<div class="qbox" style="display:none;">
    <div class="question">Q{{ loop.index }}. {{ q.q }}</div>

    {% for opt in q.options %}
    <label class="option">
        <input type="radio" name="q{{ loop.index }}" onclick="markAnswered()">
        {{ opt }}
    </label>
    {% endfor %}
</div>
{% endfor %}

<div class="controls">
    <button type="button" onclick="prevQ()">Previous</button>
    <button type="button" class="review" onclick="markReview()">Mark for Review</button>
    <button type="button" onclick="nextQ()">Next</button>
</div>

<div style="margin-top:15px;">
    <button type="submit" class="submit">Submit Test</button>
</div>
</div>

<!-- RIGHT (PALETTE) -->
<div class="right">
    <h4>Question Palette</h4>
    <div class="palette" id="palette"></div>
</div>

</div>
</form>

<script>
let current = 0;
let boxes = document.querySelectorAll(".qbox");
let status = []; // 0=not visited, 1=answered, 2=review

// INIT
for(let i=0;i<boxes.length;i++){
    status.push(0);
}
boxes[0].style.display="block";

// CREATE PALETTE
const pal = document.getElementById("palette");
for(let i=0;i<boxes.length;i++){
    let b = document.createElement("button");
    b.innerText = i+1;
    b.className = "grey";
    b.onclick = ()=>jump(i);
    b.id = "p"+i;
    pal.appendChild(b);
}

function updatePalette(){
    for(let i=0;i<status.length;i++){
        let b = document.getElementById("p"+i);
        if(status[i]==1) b.className="green";
        else if(status[i]==2) b.className="yellow";
        else b.className="grey";
    }
}

function jump(i){
    boxes[current].style.display="none";
    current=i;
    boxes[current].style.display="block";
}

function nextQ(){
    if(current<boxes.length-1){
        boxes[current].style.display="none";
        current++;
        boxes[current].style.display="block";
    }
}

function prevQ(){
    if(current>0){
        boxes[current].style.display="none";
        current--;
        boxes[current].style.display="block";
    }
}

function markAnswered(){
    status[current]=1;
    updatePalette();
}

function markReview(){
    status[current]=2;
    updatePalette();
}

// TIMER (60 min)
let time = 60*60;
setInterval(()=>{
    time--;
    let m = Math.floor(time/60);
    let s = time%60;
    document.getElementById("timer").innerText =
        m+":"+(s<10?"0"+s:s);
    if(time<=0) document.getElementById("examForm").submit();
},1000);
</script>

</body>
</html>