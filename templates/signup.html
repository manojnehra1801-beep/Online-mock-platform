@app.route("/signup", methods=["GET", "POST"])
def signup():
    if request.method == "POST":
        username = request.form.get("username")
        password = request.form.get("password")

        try:
            conn = get_db()
            cur = conn.cursor()
            cur.execute(
                "INSERT INTO students (username, password) VALUES (?, ?)",
                (username, password)
            )
            conn.commit()
            conn.close()
            return redirect("/")

        except sqlite3.IntegrityError:
            return "Username already exists. Try another one."

        except Exception as e:
            return f"SIGNUP ERROR: {e}"

    return render_template("signup.html")